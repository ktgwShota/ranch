# D1 マイグレーション

このディレクトリには、Cloudflare D1 データベースのマイグレーションファイルが含まれています。

## マイグレーションの実行方法

### ローカル開発環境（ステージングDB）
```bash
# ローカルでマイグレーションを実行
npm run db:migrate:staging

# リモートのステージングDBにマイグレーションを実行
npm run db:migrate:staging:remote
```

### 本番環境
```bash
# 本番DBにマイグレーションを実行
npm run db:migrate:production:remote
```

## マイグレーションファイルの命名規則

- `0001_initial_schema.sql` - 初期スキーマ
- `0002_add_sample_data.sql` - サンプルデータ
- `0003_add_new_feature.sql` - 新機能用のテーブル追加
- ...

ファイル名は `{連番}_{説明}.sql` の形式で命名してください。

## 新しいマイグレーションの作成

1. 新しいSQLファイルを作成
2. 適切な連番と説明を付ける
3. ローカルでテスト
4. リモートに適用

## 注意事項

- マイグレーションは順番に実行されます
- 一度実行されたマイグレーションは再実行されません
- 本番環境への適用前に必ずローカルでテストしてください
- データの削除やカラムの削除は慎重に行ってください
